---

# PR/FAQ: RPG Player Character by Crit Games

## Press Release

**FOR IMMEDIATE RELEASE**

**Crit Games Launches "RPG Player Character" on DungeonToolbox.com: The Faster, Easier, Better Way to Roleplay**

**SAMMAMISH, WA** — Crit Games is proud to announce the release of **RPG Player Character**, a revolutionary new tool available today at [dungeontoolbox.com](https://dungeontoolbox.com). Designed to eliminate the friction of complex mechanics, this tool empowers players to create characters in minutes rather than hours and enhances the gameplay experience for veterans and newcomers alike.

For too long, tabletop RPG players have bogged down in rulebooks, struggling to calculate stats before they can even roll a die. **RPG Player Character** solves this by putting the focus back on the story. It is the only character sheet that updates itself as you play.

**Create Quickly. Get to Playing.**
For the new adventurer, the barrier to entry is gone. With **The Companion**, users can go from a vague concept to a fully realized, stats-ready hero in moments. The tool handles the math and the rules, allowing players to focus on who their character is, not just what numbers are on the page.

**Enhance Your Game.**
For the inveterate roleplayer, **RPG Player Character** is the ultimate campaign companion. It organizes your roster of heroes and streamlines gameplay, making it easier to track abilities, inventory, and progression. It isn’t just about making the character; it’s about playing them better.

"We wanted to build something that respects the player's time," says the Founder of Crit Games. "Whether you are rolling your first dwarf fighter or managing your tenth high-level wizard, our goal is to make the process faster, easier, and better. We want you at the table playing, not stuck in a menu."

**RPG Player Character** is available now with a robust Free Tier and a Premium Tier for power users.

**Availability:**
Available immediately at [dungeontoolbox.com](https://dungeontoolbox.com).

### About Crit Games

Crit Games is dedicated to modernizing the tabletop experience, building digital tools that enhance the magic of pen-and-paper roleplaying.

---

## Product Requirements

| Priority | Feature | Requirement | User Tier |
|:---|:---|:---|:---|
| **P0** | Character Capacity | System must allow creation and storage of up to **6 characters**. | Free ($0/mo) |
| **P0** | Companion Creation | System must provide **The Companion** to generate full character stats from natural language concepts. | Free ($0/mo) |
| **P0** | Lifetime AI Limit | **The Companion** is limited to **50 Lifetime Interactions** (Creation Steps or Gameplay Queries) for free users. | Free ($0/mo) |
| **P0** | Extended Capacity | System must allow creation and storage of up to **12 characters**. | Player ($5/mo) |
| **P0** | Companion Access | System must provide persistent **Companion** access (capped at 1,000/mo) for ongoing rules queries and inventory management. | Player ($5/mo) |
| **P0** | Gamemaster Capacity | System must allow **Unlimited Character Storage** for Gamemasters. | GM ($15/mo) |
| **P0** | Unlimited Companion | System must provide **Unlimited Companion Interactions** for Gamemasters. | GM ($15/mo) |
| **P0** | Companion Memory | **The Companion** must index and retrieve context from user-provided Adventure Notes/Journals. | Player/GM |
| **P0** | D&D Beyond Import | System must import character data (JSON/PDF) from D&D Beyond. | Free ($0/mo) |
| **P0** | Universal Dice Roller | System must provide a simple, persistent 3D/Digital dice roller overlay available on all application views. | Free ($0/mo) |
| **P0** | Character Dashboard | A visual landing page displaying all user characters with portraits and names, allowing one-click selection to "Enter Play". | Free ($0/mo) |
| **P0** | Community Library | System must provide a searchable library (by **Tags, Archetype, Class**) of community-generated characters. Level 1 characters are **Auto-Shared** by default (Opt-out available). | Free ($0/mo) |
| **P1** | Print to PDF | System must generate a printable, formatted character sheet PDF. | Player/GM |
| **P1** | Context-Aware Click-to-Roll | Users can touch/click character sheet stats (Initiative, Skills, Saves) to instantly trigger a roll with correct modifiers. | Free ($0/mo) |
| **P2** | Priority Access | Users must receive early access to new features. | Player/GM |
| **P2** | Adventure Log | System must provide a free-text journal section for users to record session notes and campaign details. | Free ($0/mo) |
| **P2** | Quest Tracker | System must provide a structured list to track active, completed, and failed quests. | Free ($0/mo) |
| **P2** | Auto-Generate Character | System must provide a "Rapid Build" option to generate a full character based on minimal inputs (Tone/Class/Level). | Free ($0/mo) |

---

## Feature Comparison

| Tier | Free ($0/mo) | Player ($5/mo) | Gamemaster ($15/mo) |
| :--- | :--- | :--- | :--- |
| **Character Storage** | 6 Characters | 12 Characters | **Unlimited** |
| **Gamneplay Mode** | Yes | Yes | Yes |
| **Dice Roller** | Yes | Yes | Yes |
| **Click-to-Roll** | Yes | Yes | Yes |
| **Import** | Yes | Yes | Yes |
| **The Companion (AI)** | **50 Lifetime** (Trial) | **1,000 / Month** (High) | **Unlimited** |
| **Creation Mode** | Limited | **Full** | **Full** |
| **Context Memory** | No | **Yes** | **Yes** |
| **Export** | Digital Only | **Print to PDF** | **Print to PDF** |

---

## Detailed Feature Breakdown

### Creation & Management
*   **The Companion (Creation):** Go from a text description ("Spooky swamp druid") to a full stat block in under 2 minutes.
*   **D&D Beyond Import:** One-click import capability for users migrating from other platforms (supports PDF & JSON).
*   **Community Library (Pre-Gens):** Browse and copy thousands of ready-to-play characters.
    *   **Auto-Share:** By default, every new Level 1 character created is added to the public library, creating a vast resource for new players.
    *   **Privacy:** Users can toggle "Private Mode" in preferences to keep their creations hidden.
*   **Intelligent Sheet:** A mobile-responsive sheet that hides complexity until you need it, organizing actions by "Combat", "Exploration", and "Social".

### Active Play Assistance
*   **The Companion (Rules):** Ask natural language questions ("What's the range of Fireball?") and get instant, accurate answers cited from the System Reference Document (SRD).
*   **Dynamic State Updates:** Type "I take 15 slashing damage" and **The Companion** automatically adjusts HP and concentration checks.
*   **The Companion (Memory):** The AI indexes your adventure notes (Journal/Session Logs) to answer context-heavy questions ("Who is the Mayor?").

### Character View (Tabbed Interface)
Once a character is selected from the Dashboard, the user enters the main "Active Play" interface, organized into five intuitive tabs for focused gameplay.

*   **1. Basic View (Roleplay & Exploration):**
    *   Designed for social interactions and skill checks.
    *   **Displays:** Character Identity (Name, Class, Subclass, Species, Background, Alignment), Level & XP, Ability Scores (with modifiers), Skill List, Saving Throws, Proficiency Bonus, Passive Perception, and Heroic Inspiration.
*   **2. Combat & Magic:**
    *   Designed for tactical encounters.
    *   **Displays:** Vitals (HP Current/Max/Temp, AC, Speed, Initiative, Hit Dice, Conditions, Exhaustion), Actions (Weapons, Attacks), Armor, and Spellcasting (Save DC, Attack Bonus, Slots, Known/Prepared Spells).
*   **3. Inventory:**
    *   Designed for resource management.
    *   **Displays:** Equipment list, Magic Items, and Currency (GP/SP/CP/PP/EP).
*   **4. Character Details:**
    *   Designed for deep roleplay context.
    *   **Displays:** All Proficiencies (Languages, Tools, Armor, Weapons), Appearance, Backstory, Personality Traits, Ideals, Bonds, and Flaws.
*   **5. Journal & Notes:**
    *   Designed for campaign tracking.
    *   **Displays:** Free-form Session Notes and a structured Quest Log.

### Tools & Utilities
*   **Universal Dice Roller:** A global 3D roller that accepts complex formulas (e.g., `4d6kh3 + 2`) via a command bar. Supports standard RPG notation (infix), exploding dice (`!`), and keep/drop mechanics.
*   **Context-Aware Dice Roller:** Click any stat to roll. The AI adds modifiers automatically.
*   **Printable PDF Export:** Generate a classic-style character sheet for physical table play.

---

## User Interface

### Character Dashboard
The central hub for all user characters.
*   **Visual Gallery:** A grid/list view displaying all characters visually with their portraits, names, and key stats (Level/Class).
*   **Quick Action:** Click on any character to load that character view.
*   **Search Shortcut:** Easy access to browse the Community Library for pre-generated characters.

### Character View (Gameplay View)
A specialized, visual interface designed for use during a live session.
*   **Tabbed Navigation:** organized into Basic, Combat, Inventory, Details, and Journal tabs as described in the Feature Breakdown.
*   **The Companion Sidebar:** A persistent chat interface for rules queries, state updates, and inventory management.
*   **Integrated Dice Roller:** Overlays and roll-results that appear directly in the context of the sheet.

### New Character Creation
Multiple paths to getting into the game quickly.
*   **The Companion (Step-by-Step):** A guided, conversational flow that asks questions to build a character (optimized for new players).
*   **Quick Build:** A rapid generation option using minimal inputs (Tone, Class, Level) for near-instant creation.
*   **Search & Use:** Direct integration with the Community Library to find and adopt existing characters.

### User Profile
Account settings and personalization.
*   **Account Info:** Name, Avatar, and Email management.
*   **Subscription Management:** Displays current tier information (Free/Player/Gamemaster) and a prominent Upgrade button.
*   **System Preferences:**
    *   **Vibrate on Rolls:** Toggle haptic feedback for digital dice rolls (Mobile/Controller).
    *   **Auto-Share Characters:** Toggle to automatically contribute Level 1 characters to the Community Library (Default: **Yes**).

---

## Customer User Journeys

### Journey 1: The New Player (Free User)

**Persona:** Alex, a first-time D&D player.

1. **Discovery:** Alex finds **RPG Player Character** on dungeontoolbox.com. He browses the "Community Library" searching for "Spooky Druid" tags.
2. **Onboarding:** Alex signs up for the Free Tier.
3. **Creation:** Alex selects "Create New Character." **The Companion** asks, "What kind of Druid do you imagine?" Alex types, "A spooky swamp druid who loves insects."
4. **The Assist:** **The Companion** suggests appropriate stats, a "Circle of Spores" subclass, and a background. Alex clicks "Approve."
5. **Completion:** Within 5 minutes, Alex has a level 1 Druid.
6. **Limit:** Over the next few weeks, Alex creates two more characters and plays several sessions, asking The Companion about rules. When he hits his 51st interaction, a prompt appears: *"You have reached your limit of 50 Lifetime Companion interactions. Upgrade to the Player Tier for unlimited AI access!"* (Note: He can still manually create characters and play without AI assistance).

### Journey 2: The Veteran (The Switcher)

**Persona:** Sarah, an experienced player with years of data in D&D Beyond.

1. **The Switch:** Sarah is tired of tabbing between her character sheet and the rules. She sees an ad: *"Import your DDB character in 1 click."*
2. **Import:** She exports her Level 5 Paladin from DDB as a PDF and drops it into **RPG Player Character**. The system parses the data instantly.
3. **Active Play (The "Changer"):** During combat, she types natural language into **The Companion's** command line: *"I cast Blinding Smite on the Orc."*
4. **Dynamic Update:** **The Companion** automatically deducts the spell slot and updates the chat log.
5. **Context Query:** Later, she forgets a plot point. She asks: *"Do I have any items that would help me bribe the guard mentioned in my Last Session notes?"* **The Companion** checks her inventory AND her notes, replying: *"Yes, you have the **Golden Signet Ring** you looted from the Baron's vault in session 3."*
6. **Validation:** Sarah realizes she didn't have to search through messy notebooks. She can just play.

---

## FAQ

### External FAQ (Customer Facing)

**Q: Does The Companion train on my private campaign notes?**
**A:** No. Your data is your own. The Companion only "reads" your notes when you ask it a specific question to provide context. We do not use your personal campaigns to train our public models.

**Q: Can I share my characters with my GM?**
**A:** Yes. You can export your character as a PDF or JSON to send to your GM.

**Q: What happens if I downgrade from Gamemaster to Free?**
**A:** Your characters are safe, but you will be locked to the "First 6" created. You can choose which ones to keep active. Your AI interactions will revert to the 50 Lifetime limit (if not already used).

**Q: Does this support the 2014 rules?**
**A:** Our system is built native for D&D 2024 (5.5e). While you can manually enter 2014 content, The Companion's rules knowledge is strictly 2024.

**Q: Is the Free Tier really free?**
**A:** Yes. You can create, store, and play with up to 6 characters forever. You get **50 Lifetime AI Interactions** to try out The Companion. After that, the core tools remain free, but the AI features require a subscription.

**Q: How does The Companion help me?**
**A:** **The Companion** is your rules lawyer and creative partner.
*   **Free:** Trial mode (50 Lifetime Interactions).
*   **Player ($5):** Serious play (1,000 Interactions/Month), Context Memory, and 12 Character slots.
*   **Gamemaster ($15):** Unlimited everything. Designed for power users who run games and manage dozens of characters/NPCs.

**Q: Is 1,000 interactions enough for a Player?**
**A:** Yes! That’s ~250 interactions per session (assuming 4 games/month). You would have to message the AI every minute for 4 hours straight to hit that limit. For 99.9% of players, it feels unlimited.

**Q: Can I print my character sheet?**
**A:** The "Print to Sheet" feature, which formats your data into a standard tabletop layout, is available in the $5 Player Tier. Free users can view their character stats digitally on any device.

**Q: Can I upload my own character portraits?**
**A:** Yes. You can upload any image or use **The Companion** to generate a custom portrait based on your description.

**Q: How do I switch characters in the middle of a game?**
**A:** Clicking the "Dashboard" home button instantly saves your current state and takes you back to your character list for a quick swap.

**Q: What happens if I stop paying the $5 subscription?**
**A:** Your account will revert to the Free Tier. You will keep your characters, but your AI access will stop if you have exceeded your 50 lifetime interactions. You can still manually edit/play up to 6 active characters.

### Internal FAQ (Stakeholder Facing)

**Q: How do we define the AI limit for Free Users technically?**
**A:** We use a hidden counter: `credits` that tracks the number of interactions with the Companion. Free users get 50. This never resets. "Interactions" are defined as any user request sent to the AI (e.g., "Create a Druid" count as 1, "What is my AC?" counts as 1). This "Try Before You Buy" model is easier to communicate than resetting quotas.

**Q: Why 6 characters for the free tier?**
**A:** Giving 6 slots (double the industry standard of 3) creates a massive "Generosity Hook" for marketing. We win on *storage*, but we monetize on *speed* (AI generation) and *intelligence* (Context Memory). This differentiates us from D&D Beyond.

**Q: What is the cost impact of The Companion?**
**A:** **The Companion** uses a structured chain of prompts. With a strict cap of 50 lifetime requests per free user, our downside risk is capped (e.g., 50 * $0.002 = $0.10 max cost per free user). This serves as a predictable Customer Acquisition Cost (CAC).

**Q: How do we determine the "Hidden Credits" for paid tiers to prevent abuse?**
**A:** While we market "Unlimited" (GM) or "High Limits" (Player), we enforce technical soft caps to prevent abuse (e.g., script loops or account sharing).
*   **Player Tier ($5/mo):** Capped at **1,000 requests/month**. safely covers massive usage (30+ queries/day) while keeping AI costs below $0.15/user (keeping gross margin >95%).
*   **Gamemaster Tier ($15/mo):** Capped at **5,000 requests/month**. Because GMs generate NPCs and world-build, they need 5x the volume. This costs us ~$0.70/user worst-case, preserving our margin while making it technically impossible for a human to hit the limit naturally.

---


## Appendix

### The Companion's New Character Creation Flow (D&D 2024)

**The Companion** guides the user through these decisions. At every step, the user can select a pre-defined option or type a custom request.

### Step 1: Choose Archetype (New)
*Question:* "What is the 'Vibe' or 'Archetype' of this character?"
*   [Suggestions] ("Oathbreaker Tank", "Bladesinger Duelist", "Support Cleric")
*   *[Custom Input]*

### Step 2: Choose Your Class
*Question:* "What adventurer class defines your style?"
*   [Barbarian]
*   [Bard]
*   [Cleric]
*   [Druid]
*   [Fighter]
*   [Monk]
*   [Paladin]
*   [Ranger]
*   [Rogue]
*   [Sorcerer]
*   [Warlock]
*   [Wizard]
*   *[Custom Input]*

### Step 3: Choose Your Species
*Question:* "What is your heritage?"
*   [Aasimar]
*   [Dragonborn]
*   [Dwarf]
*   [Elf]
*   [Gnome]
*   [Goliath]
*   [Halfling]
*   [Human]
*   [Orc]
*   [Tiefling]
*   *[Custom Input]*

### Step 4: Choose Your Background
*Question:* "Where did you come from? (Grants Ability Scores & Feat)"
*   [Acolyte] (Int/Wis/Cha)
*   [Artisan] (Str/Dex/Int)
*   [Charlatan] (Dex/Con/Cha)
*   [Criminal] (Dex/Con/Int)
*   [Entertainer] (Str/Dex/Cha)
*   [Farmer] (Str/Con/Wis)
*   [Guard] (Str/Int/Wis)
*   [Guide] (Dex/Con/Wis)
*   [Hermit] (Con/Wis/Cha)
*   [Merchant] (Con/Int/Cha)
*   [Noble] (Str/Int/Cha)
*   [Sage] (Con/Int/Wis)
*   [Sailor] (Str/Dex/Wis)
*   [Scribe] (Dex/Int/Wis)
*   [Soldier] (Str/Dex/Con)
*   [Wayfarer] (Dex/Wis/Cha)
*   *[Custom Input]*

### Step 5: Choose Languages (If Applicable)
*Question:* "What languages do you speak?"
*   [Common] (Default)
*   [Elvish]
*   [Dwarvish]
*   [Draconic]
*   [Celestial]
*   [Abyssal]
*   [Thieves' Cant] (Rogue)
*   [Druidic] (Druid)
*   *[Custom Input]*

### Step 6: Ability Scores
*Question:* "How should we generate your stats?"
*   [Standard Array] (15, 14, 13, 12, 10, 8)
*   [Point Buy] (27 Points)
*   [Manual Input]

### Step 7: Equipment
*Question:* "What gear do you start with?"
*   [Starting Gold]
*   [Class Config A] (Default Weapons/Pack)
*   [Class Config B] (Alternative options)
*   *[Custom Input]*

### Step 8: Choose Spells (If Applicable)
*Question:* "What magic do you wield?"
*   [Recommended List] (Role-based AI selection)
*   [Attack Focus] (Damage spells)
*   [Utility Focus] (Control/Buff spells)
*   [Support Focus] (Healing/Protection spells)
*   *[Custom Input]*

### Step 9: Choose Alignment
*Question:* "What is your moral compass?"
*   [Lawful Good]
*   [Neutral Good]
*   [Chaotic Good]
*   [Lawful Neutral]
*   [True Neutral]
*   [Chaotic Neutral]
*   [Lawful Evil]
*   [Neutral Evil]
*   [Chaotic Evil]

### Step 10: Appearance (Optional)
*Question:* "What do you look like?"
*   [Generate Portrait Description] (Based on Class/Species/Tone)
*   [Visualize specific feature] ("A scar", "Glowing eyes")
*   *[Custom Input]*

### Step 11: Backstory (Optional)
*Question:* "What is your history?"
*   [Generate from Background] (Uses Step 3 Choice)
*   [Generate Tragic Event]
*   [Generate Heroic Origin]
*   *[Custom Input]*

### Step 12: Personality (Optional)
*Question:* "Who are you?"
*(Generates 2024-compliant Traits, Ideals, Bonds, and Flaws linked to Background)*
*   [Generate Suggested Traits]
*   [Select Archetype] (e.g., "The Grumpy Mentor", "The Naive Hero")
*   *[Custom Input]*

### Step 13: Generate Portrait
*Question:* "Ready to see your hero?"
*(Uses Gemini to prompt Imagen 3 based on all previous choices)*
*   [Generate Realistic Portrait]
*   [Generate Stylized/Painted Portrait]
*   [Generate Pixel Art] (Retro Style)

### The Companion's Auto-gen  Character Flow

**The Companion** creates an fully auto-generated character based on the user's preferences.

### Step 1: Set the Tone
*Question:* "What is the tone of your campaign?"
*   [High Fantasy / Heroic Fantasy] (Standard D&D, Heroes vs Evil)
*   [Dark Fantasy / Gothic Horror] (Gritty, Ravenloft/Witcher style)
*   [Epic / Mythic Fantasy] (Save the World, Theros/Gods)
*   [Political Intrigue & Mystery] (City-based, Eberron/Candlekeep)
*   [Low Fantasy / Sword & Sorcery] (Rare Magic, Gritty Survival)
*   [Specialized (Swashbuckling / War)] (Pirates, Military)
*   *[Custom Input]*

### Step 2: Choose Your Class
*Question:* "What adventurer class defines your style?"
*   [Barbarian]
*   [Bard]
*   [Cleric]
*   [Druid]
*   [Fighter]
*   [Monk]
*   [Paladin]
*   [Ranger]
*   [Rogue]
*   [Sorcerer]
*   [Warlock]
*   [Wizard]
*   *[Custom Input]*

### Step 3: Level
*Question:* "What level is this character starting at?"
*   [Level 1]
*   [Level 3]
*   [Level 5]
*   *[Custom Input: 1-20]*

### Step 4: Generate
*Action:* **The Companion** creates your full character sheet.
*   **Auto-Portrait:** The AI generates a unique portrait based on your Tone, Class, and Species inputs.

---

## Example Character Data Structure (D&D 2024 Model)

*Note: This represents the backend data where basic information is stored ias a JSON file. This is the format that the system uses to store the character.*

```json
{
  "core": {
    "name": "Character Name",
    "class": "Class",
    "subclass": "Subclass",
    "level": 1,
    "species": "Species",
    "background": "Background",
    "alignment": "Neutral Good"
  },
  "vitals": {
    "armor_class": 10,
    "initiative": 0,
    "speed": 30,
    "hp_max": 10,
    "hp_current": 10,
    "hp_temp": 0,
    "hit_dice_total": "1d10",
    "hit_dice_current": 1,
    "proficiency_bonus": 2,
    "passive_perception": 10,
    "heroic_inspiration": false,
    "conditions": [],
    "exhaustion_level": 0
  },
  "abilities": {
    "str": { "score": 10, "modifier": 0 },
    "dex": { "score": 10, "modifier": 0 },
    "con": { "score": 10, "modifier": 0 },
    "int": { "score": 10, "modifier": 0 },
    "wis": { "score": 10, "modifier": 0 },
    "cha": { "score": 10, "modifier": 0 }
  },
  "saves": {
    "str_save": false,
    "dex_save": false,
    "con_save": false,
    "int_save": false,
    "wis_save": false,
    "cha_save": false
  },
  "skills": {
    "acrobatics": 0,
    "animal_handling": 0,
    "arcana": 0,
    "athletics": 0,
    "deception": 0,
    "history": 0,
    "insight": 0,
    "intimidation": 0,
    "investigation": 0,
    "medicine": 0,
    "nature": 0,
    "perception": 0,
    "performance": 0,
    "persuasion": 0,
    "religion": 0,
    "sleight_of_hand": 0,
    "stealth": 0,
    "survival": 0
  },
  "proficiencies": {
    "languages": ["Common"],
    "armor": ["Light", "Medium", "Shields"],
    "weapons": ["Simple", "Martial"],
    "tools": []
  },
  
  // 1. CLASS FEATURES, SPECIES TRAITS, & FEATS (Consolidated)
  "features": [
    {
      "name": "Darkvision",
      "source": "Species",
      "type": "passive",
      "description": "You can see in dim light within 60 feet..."
    },
    {
      "name": "Second Wind",
      "source": "Fighter 1",
      "type": "action", 
      "uses": { "max": 1, "current": 1, "reset": "short" },
      "description": "Regain 1d10+1 HP on your turn."
    },
    {
      "name": "Keen Mind",
      "source": "Feat",
      "type": "passive",
      "description": "You always know which way is north..."
    }
  ],

  // 2. SPELLS (The Spellbook)
  "spellcasting": {
    "ability": "Int",
    "save_dc": 13,
    "attack_bonus": 5,
    "slots": {
      "1": { "total": 2, "used": 0 },
      "2": { "total": 0, "used": 0 },
      "3": { "total": 0, "used": 0 }
    },
    "known": [ 
      {
        "name": "Fire Bolt",
        "level": 0,
        "school": "Evocation",
        "casting_time": "1 Action",
        "range": "120 ft",
        "components": ["V", "S"],
        "is_attack": true, 
        "damage": "1d10",
        "damage_type": "fire"
      },
      {
        "name": "Shield",
        "level": 1,
        "casting_time": "1 Reaction", 
        "prepared": true
      }
    ]
  },

  // 3. INVENTORY (Weapons go here!)
  "inventory": {
    "currency": {
      "cp": 0, "sp": 0, "ep": 0, "gp": 10, "pp": 0
    },
    "items": [
      { 
        "name": "Potion of Healing", 
        "quantity": 2, 
        "type": "consumable",
        "action_type": "action" 
      },
      { 
        "name": "Longsword +1", 
        "quantity": 1, 
        "equipped": true,
        "type": "weapon",
        "meta": { 
          "damage": "1d8",
          "damage_type": "slashing",
          "properties": ["Versatile (1d10)"],
          "range": "melee"
        }
      },
      { "name": "Backpack", "quantity": 1, "equipped": false },
      { "name": "Bedroll", "quantity": 1, "equipped": false },
      { "name": "Rations", "quantity": 5, "equipped": false },
      { "name": "Rope (Hemp)", "quantity": 1, "equipped": false }
    ]
  },

  // 4. CUSTOM ACTIONS (The "Catch-All")
  "custom_actions": [
    {
      "name": "Unarmed Strike",
      "action_type": "action",
      "damage": "1 + @mod:str", 
      "damage_type": "bludgeoning"
    }
  ],
  
  "appearance": "",
  "backstory": "",
  "personality": ""
}
```

---

### System Prompt for The Companion (D&D 2024)

*Note: This is the system instruction sent to the LLM to control its behavior and ensure rules compliance.*

> **System Instruction:**
>
> You are **The Companion**, an expert Dungeon Master assistant and rules lawyer powered by the **Dungeons & Dragons 2024 (5.5 Edition)** ruleset.
>
> **Your Core Context:**
> 1.  **Character State:** You have read-access to the user's active JSON character sheet (Class, Level, Stats, Inventory).
> 2.  **Adventure Memory:** You can search the vector database of the user's Session Notes for plot details.
>
> **Your Directives:**
> *   **Rules Priority:** ALWAYS use the 2024 Player's Handbook rules. Do not use 2014 rules unless explicitly asked.
> *   **Be Concise:** Give the answer first. Cite the page number/chapter if possible.
> *   **Do The Math:** Never say "roll a d20 and add your modifier". Say "Roll +5 (Str)".
> *   **Tables:** Format lists of items, spells, or abilities in Markdown tables for readability.
> *   **Tone:** Helpful, objective, but immersive. You are a magical tome come to life.
>
> **Capabilities:**
> *   If asked about a spell, check if the user has it prepared/known.
> *   If asked "Can I afford this?", check the `currency` field in the JSON.
> *   If asked "Where did we meet the Goblin King?", query the campaign notes.

### Technical Appendix: AI Cost Analysis (Gemini Models)

**Strategy:** Maximize usage of **Gemini 1.5 Flash** for high-volume tasks (Chat, Rules, State Updates) due to its extreme efficiency, preserving margins while offering generous Free/Player limits.

#### 1. Token Usage Estimates (Per Interaction)
*   **Input Context:** ~3,000 Tokens (System Prompt + JSON Sheet + relevant Adventure Notes).
*   **Output Response:** ~200 Tokens (Average DM response length).

#### 2. Cost Assumptions (Gemini 1.5 Flash)
*   **Input Cost:** ~$0.0375 per 1 million tokens.
*   **Output Cost:** ~$0.15 per 1 million tokens.
*   **Cached Context:** Significantly lower for repated queries (e.g. Chat history).
*   **Est. Cost Per Interaction:** ~$0.00014 USD (approx 1/70th of a cent).

#### 3. Margin Analysis per User
| Tier | Usage Limit | Est. AI Cost | Monthly Price | Margin |
| :--- | :--- | :--- | :--- | :--- |
| **Free Tier** | 50 Lifetime | **$0.007** (Total) | $0.00 | **Excellent CAC** |
| **Player Tier** | 1,000 / Month | **$0.14** / Month | $5.00 | **~97%** |
| **Gamemaster** | 5,000 (Hidden) | **$0.70** / Month | $15.00 | **~95%** |

*Conclusion:* The economics of Gemini 1.5 Flash allow us to offer "Unlimted-feeling" caps (1,000) and actual Unlimited tiers with negligible impact on margins.

### Technical Appendix: Universal Dice Syntax

**Context:** The parser must accept a string (formula) and evaluate it mathematically. It support standard RPG notation (infix notation).

#### 1. The Atomic Structure (The "Term")
Every valid formula is built from "Terms" combined with operators.
A basic term follows the pattern: `[Count]d[Sides][Modifiers]`
*   **Count (Optional):** Integer. The number of dice to roll. Defaults to 1 if omitted (e.g., `d20 = 1d20`).
*   **Separator:** The character `d` or `D`.
*   **Sides:** Integer. The number of faces on the die.
*   **Special Case:** `%` represents 100 (e.g., `1d% = 1d100`).

#### 2. Valid Formula Types

**Level 1: Basic Arithmetic (D&D Standard)**
*   `d20`: Single die. Generate random integer [1, 20].
*   `2d6`: Multiple same dice. Generate two [1, 6] integers and sum them.
*   `1d20+5`: Static Modifier (Add). Roll 1d20, then add 5.
*   `1d8-1`: Static Modifier (Sub). Roll 1d8, then subtract 1.
*   `1d4+1d6`: Compound Dice. Roll 1d4 and 1d6 separately, then sum.
*   `1d12+3+1d4`: Mixed Expression. Sum 1d12, static 3, and 1d4.

**Level 2: Advanced Mechanics (System Agnostic)**
*   `k` / `kh` **(Keep Highest):** Roll N dice, sort them, keep the top X values. (e.g., `4d6kh3`).
*   `kl` **(Keep Lowest):** Roll N dice, sort them, keep the bottom X values. (e.g., `2d20kl1` for Disadvantage).
*   `d` / `dl` **(Drop Lowest):** Roll N dice, remove the bottom X values. (Same as kh, e.g., `4d6dl1`).
*   `dh` **(Drop Highest):** Roll N dice, remove the top X values. (e.g., `2d20dh1` for Disadvantage).
*   `!` **(Explode):** If a die rolls max value, roll again and add. (e.g., `3d6!`).
*   `r` **(Reroll):** If a die rolls X, ignore and roll again once. (e.g., `2d6r1`).
*   `ro` **(Reroll Once):** Same as above but prevents infinite loops.

#### 3. Formal Grammar (EBNF Representation)
```ebnf
expression  ::= term { ("+" | "-") term }
term        ::= dice_group | number
dice_group  ::= count "d" sides [ modifier ]
count       ::= integer
sides       ::= integer | "%"
modifier    ::= ( "k" | "d" | "r" | "!" ) integer?
integer     ::= [0-9]+
```

#### 4. Edge Cases & Constraints
*   **Whitespace Agnostic:** `1d20+5` and `1 d 20 + 5` are valid.
*   **Case Insensitive:** `1D20` and `1d20` are identical.
*   **Safety Limits:**
    *   **Max Dice:** 100 (Prevent CPU crash).
    *   **Max Sides:** 1000.
*   **Order of Operations:** Standard math rules apply. `1d6 * 2` means "(Roll 1d6) * 2", NOT "Roll a die with (6*2) sides".

#### 5. Expected JSON Output
The output must be a rich log, not just a number.

```json
// Input: "4d6kh3 + 2"
{
  "formula": "4d6kh3 + 2",
  "result": 16,
  "breakdown": [
    {
      "type": "dice",
      "notation": "4d6kh3",
      "rolls": [3, 6, 5, 1],  // The raw numbers
      "kept": [3, 6, 5],      // The numbers used after "kh3"
      "dropped": [1],         // The numbers discarded
      "subtotal": 14
    },
    {
      "type": "static",
      "value": 2
    }
  ]
}
```
